import Head from "next/head";

import { MenuBar } from "../components/MenuBar";

import { PostCard } from "../components/PostCard";

import { useQuery } from "urql";

const POST_QUERY = `
query {
  getPosts{
  username
  body
  id
  likeCount
  commentCount
  createdAt
  photo
  }
}
`;
export default function Home() {
  const [result] = useQuery({
    query: POST_QUERY,
  });

  const { data, fetching, error } = result;

  if (fetching) return "loading";
  if (error) return "error";
  return (
    <>
      <Head>
        <title>Malluchan</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <MenuBar />

      <PostCard posts={data.getPosts} loading={fetching} />
    </>
  );
}
